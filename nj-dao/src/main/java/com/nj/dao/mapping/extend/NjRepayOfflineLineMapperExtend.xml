<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nj.dao.extend.NjRepayOfflineLineMapperExtend">
	
    <resultMap id="BaseResultMap" type="com.nj.model.generate.NjRepayOfflineLine">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 30 15:04:59 CST 2017.
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="offline_repay_id" jdbcType="VARCHAR" property="offlineRepayId" />
    <result column="plan_repay_day" jdbcType="DATE" property="planRepayDay" />
    <result column="actual_repay_day" jdbcType="DATE" property="actualRepayDay" />
    <result column="overdue_day" jdbcType="INTEGER" property="overdueDay" />
    <result column="total_amount" jdbcType="DECIMAL" property="totalAmount" />
    <result column="principal" jdbcType="DECIMAL" property="principal" />
    <result column="interest" jdbcType="DECIMAL" property="interest" />
    <result column="status" jdbcType="VARCHAR" property="status" />
    <result column="repay_type" jdbcType="INTEGER" property="repayType" />
    <result column="actual_people" jdbcType="VARCHAR" property="actualPeople" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
  </resultMap>
  
    <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 17 17:31:16 CST 2017.
    -->
    t1.id, t1.offline_repay_id, t1.plan_repay_day, t1.actual_repay_day, t1.overdue_day, 
    t1.total_amount, t1.principal, t1.interest, t1.status, t1.repay_type, t1.actual_people, t1.remark
  </sql>
  
  <select id="getRepayOfflineList" parameterType="java.util.Map"
		resultType="java.util.HashMap">
		select 
			t1.id, 
			t1.offline_repay_id offlineRepayId, 
			t1.plan_repay_day planRepayDay, 
			t1.actual_repay_day actualRepayDay, 
			t1.overdue_day overdueDay, 
    		t1.total_amount totalAmount, 
    		t1.principal, 
    		t1.interest, 
    		t1.status, 
    		t1.repay_type repayType, 
    		t1.actual_people actualPeople, 
    		t1.remark
     	from 
     		nj_repay_offline_line t1 
			inner join nj_repay_offline t2 
			on t1.offline_repay_id = t2.id
		where 1 = 1 
			<if test="orderNo !=null">
			 	AND t2.order_no = #{orderNo}
 			</if>
			order by t1.plan_repay_day limit #{start},#{length}
	</select>
	
	<select id="getRepayOfflineListCount" parameterType="java.util.Map"
		resultType="java.lang.Integer">
		select count(*) from nj_repay_offline_line t1 
			inner join nj_repay_offline t2 
			on t1.offline_repay_id = t2.id
			where 1 = 1 
			<if test="orderNo !=null">
			 AND t2.order_no = #{orderNo}
 			</if>
	</select>
	
</mapper>